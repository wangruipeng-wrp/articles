<h1>运行环境搭建</h1>

> 《掘金小册-开发者必备的 Docker 实践指南》学习笔记

# Docker 介绍

**Docker 的四大组成对象：**

- Docker 镜像：相当于软件的安装包
- Docker 容器：相当于安装完正在运行的软件
- Docker 网络：负责软件之间的相互通信
- Docker 数据卷：将软件内外的数据相互映射，提供容器内外数据交互功能

Docker 是以 服务端/客户端 的形式对外提供服务的，服务端是 docker daemon，客户端是 docker CLI。所有的镜像模块、容器模块、网络模块、数据卷模块都是实现在 docker daemon 之中的。

docker daemon 暴露了一套 RESTFul API 接口以对外提供服务，我们可以在控制台通过编写 http 请求来控制 docker daemon，但是这样太繁琐了。所以，Docker 提供了 docker CLI 可以在控制台更方便的控制 docker daemon。

# 搭建 Docker 运行环境

Docker 主要是运行在 Linux 系统中的，也有提供运行在 Windows、Mac 系统上的桌面软件，运行在 Windows、Mac 系统上的 Docker 也是搭了一层 Linux 的隔离。Windows 和 Mac 操作系统的 Docker 环境下载连接如下：

- [Windows 安装环境下载](https://docs.docker.com/desktop/install/windows-install/)
- [Mac 安装环境下载](https://docs.docker.com/desktop/install/mac-install/)

**CentOS 安装如下：**

```
sudo yum install yum-utils device-mapper-persistent-data lvm2

sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
sudo yum install docker-ce

sudo systemctl enable docker  # 开机自启动
sudo systemctl start docker   # 启动 Docker 服务
```

安装完成，启动成功之后可以运行两条命令查看 Docker 的一些基本信息：

```
docker version  # Docker 版本信息（包含客户端和服务端的版本信息）
docker info     # Docker 详细信息（包含镜像、容器状态等）
```

**配置国内镜像源：**

修改 `/etc/docker/daemon.json` 文件（如果不存在，直接创建即可）添加以下内容：

```json
{
    "registry-mirrors": [
        "https://registry.docker-cn.com"
    ]
}
```

修改完成，重启 Docker 以生效：`systemctl restart docker`

运行 `docker info` 看看是否已经生效，大概在倒数两三行的位置可以看到 Registry Mirrors 信息。

```
Registry Mirrors:
 https://registry.docker-cn.com/
```

